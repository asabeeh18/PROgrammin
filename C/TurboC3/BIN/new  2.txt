#include<stdio.h>
#include<conio.h>
#include<graphics.h>
#include<math.h>

void bresenham(int x1,int y1, int x2, int y2)
{
  int dx,dy,step,xin,yin;
  int i,pk;

  dx=x2-x1;
  dy=y2-y1;

  if(abs(dx)>abs(dy))
    pk=(2*abs(dy)-abs(dx));
  else
    pk=(2*abs(dx)-abs(dy));

  while(x1!=x2 && y1!=y2)
   {

     if(abs(dx)>=abs(dy))
       {
	 if(pk<0)
	   {
	     xin=dx/abs(dx);
	     yin=0;
	     pk+=2*abs(dx);
	   }
	  else
	    {
	      xin=dx/abs(dx);
	      yin=dy/abs(dy);
	      pk+=(2*abs(dy)-2*abs(dx));
	    }
       }
      else
	{

	    if(pk<0)
	   {
	     yin=dy/abs(dy);
	     xin=0;
	     pk+=2*abs(dx);
	   }
	  else
	    {
	      xin=dx/abs(dx);
	      yin=dy/abs(dy);
	      pk+=(2*abs(dx)-2*abs(dy));
	    }
	}

	x1+=xin;
	y1+=yin;
	putpixel(x1,y1,15);
	delay(10);
     }

  }



void main()
{
	int x1,x2,y1,y2;
	int gd,gm,i;
	clrscr();

	detectgraph(&gd,&gm);
	initgraph(&gd,&gm,"C:\\TurboC3\\BGI");

	printf("Enter the two points\n");
	scanf("%d %d",&x1,&y1);
	scanf("%d %d",&x2,&y2);
	cleardevice();
	bresenham(x1,y1,x2,y2);

	getch();
}

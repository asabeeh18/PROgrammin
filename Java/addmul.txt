<td>
                        <div id="item-right">
                            <div class="question-body">
                                <h1>PROBLEM LINK:</h1>
<p><a href="http://www.codechef.com/problems/ADDMUL">Practice</a><br>
<a href="http://www.codechef.com/JULY15/problems/ADDMUL">Contest</a> </p>
<p><strong>Author:</strong> <a href="http://www.codechef.com/users/devuy11">Devendra Agarwal</a><br>
<strong>Tester:</strong> <a href="http://www.codechef.com/users/mugurelionut">Mugurel Ionut Andreica</a><br>
<strong>Editorialist:</strong> <a href="http://www.codechef.com/users/darkshadows">Lalit Kundu</a></p>
<h1>DIFFICULTY:</h1>
<p>Medium</p>
<h1>PREREQUISITES:</h1>
<p>segment tree, lazy propagation, basic maths</p>
<h1>PROBLEM:</h1>
<p>Given array <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-1-Frame"><nobr><span class="math" id="MathJax-Span-1" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.772em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">A</script> of <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-2-Frame"><nobr><span class="math" id="MathJax-Span-4" role="math" style="width: 0.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-5"><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">N</script> size and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-3-Frame"><nobr><span class="math" id="MathJax-Span-7" role="math" style="width: 0.644em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">M</script> operations of type:  </p>
<ol>
<li>Add <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-4-Frame"><nobr><span class="math" id="MathJax-Span-10" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-11"><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">v</script> to all elements in a range.  </li>
<li>Multiply <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-5-Frame"><nobr><span class="math" id="MathJax-Span-13" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-14"><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">v</script> to all elements in a range.   </li>
<li>Reset all items to <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-6-Frame"><nobr><span class="math" id="MathJax-Span-16" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-17"><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">v</script> in a range.   </li>
<li>Report sum in a range.   </li>
</ol>
<h1>QUICK EXPLANATION:</h1>
<p>================ <br>
Build a segment tree, where at each node we store <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-7-Frame"><nobr><span class="math" id="MathJax-Span-19" role="math" style="width: 1.157em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.862em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.183em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-20"><span class="texatom" id="MathJax-Span-21"><span class="mrow" id="MathJax-Span-22"><span class="mtext" id="MathJax-Span-23" style="font-family: MathJax_Main;">sum</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">\textrm{sum}</script> and variables <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-8-Frame"><nobr><span class="math" id="MathJax-Span-24" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-25"><span class="texatom" id="MathJax-Span-26"><span class="mrow" id="MathJax-Span-27"><span class="mtext" id="MathJax-Span-28" style="font-family: MathJax_Main;">mul</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">\textrm{mul}</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-9-Frame"><nobr><span class="math" id="MathJax-Span-29" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-30"><span class="texatom" id="MathJax-Span-31"><span class="mrow" id="MathJax-Span-32"><span class="mtext" id="MathJax-Span-33" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">\textrm{add}</script>, which denotes that the lazy update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-10-Frame"><nobr><span class="math" id="MathJax-Span-34" role="math" style="width: 5.26em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.785em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.144em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-35"><span class="msubsup" id="MathJax-Span-36"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-37" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-38" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-39" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="texatom" id="MathJax-Span-40" style="padding-left: 0.26em;"><span class="mrow" id="MathJax-Span-41"><span class="mtext" id="MathJax-Span-42" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-43" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-44" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-46" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-47" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-48" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-49"><span class="mtext" id="MathJax-Span-50" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10">A_i \leftarrow \textrm{mul}*A_i + \textrm{add}</script> needs to be applied. If required, we update the current node's sum and variables and propagate the laziness down the tree. Also, an multiplication update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-11-Frame"><nobr><span class="math" id="MathJax-Span-51" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-52"><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">v</script> at a node can be summarised as <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-12-Frame"><nobr><span class="math" id="MathJax-Span-54" role="math" style="width: 3.657em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.029em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-55"><span class="texatom" id="MathJax-Span-56"><span class="mrow" id="MathJax-Span-57"><span class="mtext" id="MathJax-Span-58" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-59" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="texatom" id="MathJax-Span-60" style="padding-left: 0.26em;"><span class="mrow" id="MathJax-Span-61"><span class="mtext" id="MathJax-Span-62" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-63" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">\textrm{mul} \leftarrow \textrm{mul}*v</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-13-Frame"><nobr><span class="math" id="MathJax-Span-65" role="math" style="width: 3.593em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.965em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-66"><span class="texatom" id="MathJax-Span-67"><span class="mrow" id="MathJax-Span-68"><span class="mtext" id="MathJax-Span-69" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="texatom" id="MathJax-Span-71" style="padding-left: 0.26em;"><span class="mrow" id="MathJax-Span-72"><span class="mtext" id="MathJax-Span-73" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-74" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">\textrm{add} \leftarrow \textrm{add}*v</script> and also addition update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-14-Frame"><nobr><span class="math" id="MathJax-Span-76" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-77"><span class="mi" id="MathJax-Span-78" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">v</script> at a node can be written as <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-15-Frame"><nobr><span class="math" id="MathJax-Span-79" role="math" style="width: 3.785em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.285em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.08em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-80"><span class="texatom" id="MathJax-Span-81"><span class="mrow" id="MathJax-Span-82"><span class="mtext" id="MathJax-Span-83" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-84" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="texatom" id="MathJax-Span-85" style="padding-left: 0.26em;"><span class="mrow" id="MathJax-Span-86"><span class="mtext" id="MathJax-Span-87" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-88" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="mi" id="MathJax-Span-89" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.54em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">\textrm{add} \leftarrow \textrm{add} + v</script>. Set operation with value <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-16-Frame"><nobr><span class="math" id="MathJax-Span-90" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-91"><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">v</script> can be written as <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-17-Frame"><nobr><span class="math" id="MathJax-Span-93" role="math" style="width: 2.183em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.657em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-94"><span class="texatom" id="MathJax-Span-95"><span class="mrow" id="MathJax-Span-96"><span class="mtext" id="MathJax-Span-97" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-98" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="mn" id="MathJax-Span-99" style="font-family: MathJax_Main; padding-left: 0.26em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">\textrm{mul} \leftarrow 0</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-18-Frame"><nobr><span class="math" id="MathJax-Span-100" role="math" style="width: 2.183em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.593em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-101"><span class="texatom" id="MathJax-Span-102"><span class="mrow" id="MathJax-Span-103"><span class="mtext" id="MathJax-Span-104" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-105" style="font-family: MathJax_Main; padding-left: 0.26em;">←</span><span class="mi" id="MathJax-Span-106" style="font-family: MathJax_Math-italic; padding-left: 0.26em;">v</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">\textrm{add} \leftarrow v</script>.</p>
<h1>EXPLANATION:</h1>
<p>================   </p>
<h2>BASIC SEGMENT TREE STUFF</h2>
<p>I assume you know how <a href="http://se7so.blogspot.in/2012/12/segment-trees-and-lazy-propagation.html">segment trees and lazy propagation</a> work and the basic concepts behind them like time complexity, nodes, intervals. First, I'll introduce some terminology I'm going to use.</p>
<ul>
<li>Node: It's one of the nodes in the segment tree, it represents a contiguous interval of the array <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-19-Frame"><nobr><span class="math" id="MathJax-Span-107" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.772em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-108"><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math-italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">A</script>.</li>
<li>Interval of a node is the actual range covered by the node.</li>
<li>Answer of a node is defined the actual value needed for interval queries. Here, for example, we need sum of values in the range.</li>
</ul>
<p>Let's think step by step here.</p>
<ul>
<li>For range query problems, try to see if segment tree can be used.</li>
<li>When does segment tree work? When you can merge two contiguous intervals(<em>i.e</em> nodes) to get answer of merged interval(node) in sublinear time. If complexity of merging is <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-20-Frame"><nobr><span class="math" id="MathJax-Span-110" role="math" style="width: 1.542em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.503em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-111"><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-113" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-114" style="font-family: MathJax_Math-italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-115" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-20">O(K)</script>, then complexity for each operation can be worst case <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-21-Frame"><nobr><span class="math" id="MathJax-Span-116" role="math" style="width: 3.337em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.58em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-117"><span class="mi" id="MathJax-Span-118" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-120"><span class="mrow" id="MathJax-Span-121"><span class="mtext" id="MathJax-Span-122" style="font-family: MathJax_Main;">log N</span></span></span><span class="mo" id="MathJax-Span-123" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="mi" id="MathJax-Span-124" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-125" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-21">O(\textrm{log N}*K)</script>. For example, when we talk about range minimum function, we can get minimum value of merged interval by taking minimum of answers of two individual intervals.</li>
<li>Also, for range updates you need to use lazy propagation. What does lazy propagation require to work? It requires that for an interval if we have multiple update operations, we can calculate the answer for that interval without actually updating every element in that interval. For example, if we are trying to find range minimum and range updation query is increase all elements by value <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-22-Frame"><nobr><span class="math" id="MathJax-Span-126" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-127"><span class="mi" id="MathJax-Span-128" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-22">v</script>, then our new minimum is sum of existing minimum with <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-23-Frame"><nobr><span class="math" id="MathJax-Span-129" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-130"><span class="mi" id="MathJax-Span-131" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-23">v</script>. Here also, we should be able to do this operation in sublinear time because it contributes to the factor of updations and queries.</li>
</ul>
<p>Let's see how we use above two points to find here a solution using segment trees. Let's see the query part first: query is range sum, so merging two intervals is easy, just take the individual sums.</p>
<h2>THE LAZY PROPAGATION SOLUTION</h2>
<p>Now, let's see how we can handle all updations in such a way that we can find answer for an interval without actually updating the whole interval. We are going to store some data about the updations being done at that interval node and process it to find the answer. What could be this data? How do we find out? We need to observe what kind of operations we are doing. After some certain updations, our <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-24-Frame"><nobr><span class="math" id="MathJax-Span-132" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-133"><span class="msubsup" id="MathJax-Span-134"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-135" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-136" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-24">A_i</script> could be transformed to something like <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-25-Frame"><nobr><span class="math" id="MathJax-Span-137" role="math" style="width: 9.362em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.58em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-138"><span class="mo" id="MathJax-Span-139" style="font-family: MathJax_Main;">(</span><span class="mo" id="MathJax-Span-140" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-141"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-143" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-144" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-145" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-146" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-147" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-148" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="msubsup" id="MathJax-Span-149" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-150" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-151" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-152" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-153" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-154" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-155" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-156" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-157" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="msubsup" id="MathJax-Span-158" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-159" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-160" style="font-size: 70.7%; font-family: MathJax_Main;">4</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-161" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="msubsup" id="MathJax-Span-162" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-164" style="font-size: 70.7%; font-family: MathJax_Main;">5</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-165" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-166" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-167" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-168" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-169" style="font-size: 70.7%; font-family: MathJax_Main;">6</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-170" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="msubsup" id="MathJax-Span-171" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-173" style="font-size: 70.7%; font-family: MathJax_Main;">7</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-25">((A_i*v_1 + v_2)*v_3 + v_4 + v_5)*v_6 + v_7</script>, where <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-26-Frame"><nobr><span class="math" id="MathJax-Span-174" role="math" style="width: 0.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.388em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-175"><span class="msubsup" id="MathJax-Span-176"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-178" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-26">v_1</script> to <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-27-Frame"><nobr><span class="math" id="MathJax-Span-179" role="math" style="width: 0.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.388em 1000.003em 1.413em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-180"><span class="msubsup" id="MathJax-Span-181"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-182" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-183" style="font-size: 70.7%; font-family: MathJax_Main;">7</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: -0.152em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-27">v_7</script> are values of range multiplication or range addition. Now, we can store all these values <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-28-Frame"><nobr><span class="math" id="MathJax-Span-184" role="math" style="width: 0.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.388em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-185"><span class="msubsup" id="MathJax-Span-186"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-187" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-188" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-28">v_1</script> to <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-29-Frame"><nobr><span class="math" id="MathJax-Span-189" role="math" style="width: 0.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.388em 1000.003em 1.413em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-190"><span class="msubsup" id="MathJax-Span-191"><span style="display: inline-block; position: relative; width: 0.901em; height: 0px;"><span style="position: absolute; clip: rect(3.337em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-192" style="font-family: MathJax_Math-italic;">v</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.516em;"><span class="mn" id="MathJax-Span-193" style="font-size: 70.7%; font-family: MathJax_Main;">7</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.425em; vertical-align: -0.152em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-29">v_7</script> at our node, but we might have to do <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-30-Frame"><nobr><span class="math" id="MathJax-Span-194" role="math" style="width: 5.58em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.234em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-195"><span class="mi" id="MathJax-Span-196" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-197" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-198"><span class="mrow" id="MathJax-Span-199"><span class="mtext" id="MathJax-Span-200" style="font-family: MathJax_Main;">number of queries</span></span></span><span class="mo" id="MathJax-Span-201" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-30">O(\textrm{number of queries})</script> operations at each node, which is not really sublinear. We need to find a compact notation at each node interval.</p>
<p>Now, thing worth noting here is that <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-31-Frame"><nobr><span class="math" id="MathJax-Span-202" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-203"><span class="msubsup" id="MathJax-Span-204"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-205" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-206" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-31">A_i</script> has been transformed to a linear function of <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-32-Frame"><nobr><span class="math" id="MathJax-Span-207" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-208"><span class="msubsup" id="MathJax-Span-209"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-210" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-211" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-32">A_i</script> <em>i.e.</em> something of form <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-33-Frame"><nobr><span class="math" id="MathJax-Span-212" role="math" style="width: 4.234em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.054em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-213"><span class="mo" id="MathJax-Span-214" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-215"><span class="mrow" id="MathJax-Span-216"><span class="mtext" id="MathJax-Span-217" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-218" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-219" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-221" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-222" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-223" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-224"><span class="mtext" id="MathJax-Span-225" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-226" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-33">(\textrm{mul}*A_i + \textrm{add})</script>. Now, let's say I make one more multiplication range update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-34-Frame"><nobr><span class="math" id="MathJax-Span-227" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-228"><span class="mi" id="MathJax-Span-229" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-34">v</script>, what's the new value of <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-35-Frame"><nobr><span class="math" id="MathJax-Span-230" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-231"><span class="msubsup" id="MathJax-Span-232"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-233" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-234" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-35">A_i</script>. It's <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-36-Frame"><nobr><span class="math" id="MathJax-Span-235" role="math" style="width: 5.772em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.554em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-236"><span class="mo" id="MathJax-Span-237" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-238"><span class="mrow" id="MathJax-Span-239"><span class="mtext" id="MathJax-Span-240" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-241" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="mi" id="MathJax-Span-242" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span><span class="mo" id="MathJax-Span-243" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-244" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-246" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-247" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-248" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-249"><span class="mtext" id="MathJax-Span-250" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-251" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="mi" id="MathJax-Span-252" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span><span class="mo" id="MathJax-Span-253" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-36">(\textrm{mul}*v*A_i + \textrm{add}*v)</script>. So, we update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-37-Frame"><nobr><span class="math" id="MathJax-Span-254" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-255"><span class="texatom" id="MathJax-Span-256"><span class="mrow" id="MathJax-Span-257"><span class="mtext" id="MathJax-Span-258" style="font-family: MathJax_Main;">mul</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-37">\textrm{mul}</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-38-Frame"><nobr><span class="math" id="MathJax-Span-259" role="math" style="width: 0.901em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.478em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.183em 1000.003em 2.952em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-260"><span class="mo" id="MathJax-Span-261" style="font-family: MathJax_Main;">∗</span><span class="mo" id="MathJax-Span-262" style="font-family: MathJax_Main; padding-left: 0.26em;">=</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: 0.002em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-38">*=</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-39-Frame"><nobr><span class="math" id="MathJax-Span-263" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-264"><span class="mi" id="MathJax-Span-265" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-39">v</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-40-Frame"><nobr><span class="math" id="MathJax-Span-266" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-267"><span class="texatom" id="MathJax-Span-268"><span class="mrow" id="MathJax-Span-269"><span class="mtext" id="MathJax-Span-270" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-40">\textrm{add}</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-41-Frame"><nobr><span class="math" id="MathJax-Span-271" role="math" style="width: 0.901em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.478em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.183em 1000.003em 2.952em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-272"><span class="mo" id="MathJax-Span-273" style="font-family: MathJax_Main;">∗</span><span class="mo" id="MathJax-Span-274" style="font-family: MathJax_Main; padding-left: 0.26em;">=</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: 0.002em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-41">*=</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-42-Frame"><nobr><span class="math" id="MathJax-Span-275" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-276"><span class="mi" id="MathJax-Span-277" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-42">v</script> at our node. Similarly, if we make a sum update with value <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-43-Frame"><nobr><span class="math" id="MathJax-Span-278" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-279"><span class="mi" id="MathJax-Span-280" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-43">v</script>, the new value of <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-44-Frame"><nobr><span class="math" id="MathJax-Span-281" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-282"><span class="msubsup" id="MathJax-Span-283"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-285" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-44">A_i</script> is <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-45-Frame"><nobr><span class="math" id="MathJax-Span-286" role="math" style="width: 5.131em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.529em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-287"><span class="mo" id="MathJax-Span-288" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-289"><span class="mrow" id="MathJax-Span-290"><span class="mtext" id="MathJax-Span-291" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-292" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-293" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-294" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-295" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-296" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-297" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-298"><span class="mtext" id="MathJax-Span-299" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-300" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="mi" id="MathJax-Span-301" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">v</span><span class="mo" id="MathJax-Span-302" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-45">(\textrm{mul}*A_i + \textrm{add} + v)</script>, so we update <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-46-Frame"><nobr><span class="math" id="MathJax-Span-303" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-304"><span class="texatom" id="MathJax-Span-305"><span class="mrow" id="MathJax-Span-306"><span class="mtext" id="MathJax-Span-307" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-46">\textrm{add}</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-47-Frame"><nobr><span class="math" id="MathJax-Span-308" role="math" style="width: 1.093em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.798em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.054em 1000.003em 3.08em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-309"><span class="mo" id="MathJax-Span-310" style="font-family: MathJax_Main;">+</span><span class="mo" id="MathJax-Span-311" style="font-family: MathJax_Main; padding-left: 0.26em;">=</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.463em; vertical-align: -0.075em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-47">+=</script> <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-48-Frame"><nobr><span class="math" id="MathJax-Span-312" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-313"><span class="mi" id="MathJax-Span-314" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-48">v</script>. For setting all elements to <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-49-Frame"><nobr><span class="math" id="MathJax-Span-315" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-316"><span class="mi" id="MathJax-Span-317" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-49">v</script>, we can just make one multiplication with <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-50-Frame"><nobr><span class="math" id="MathJax-Span-318" role="math" style="width: 0.388em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.58em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.99em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-319"><span class="mn" id="MathJax-Span-320" style="font-family: MathJax_Main;">0</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-50">0</script> and then addition with value <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-51-Frame"><nobr><span class="math" id="MathJax-Span-321" role="math" style="width: 0.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.516em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-322"><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Math-italic;">v</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-51">v</script>.</p>
<p>So, if this interval is in range <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-52-Frame"><nobr><span class="math" id="MathJax-Span-324" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.708em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-325"><span class="mi" id="MathJax-Span-326" style="font-family: MathJax_Math-italic;">L</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-52">L</script> to <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-53-Frame"><nobr><span class="math" id="MathJax-Span-327" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.772em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-328"><span class="mi" id="MathJax-Span-329" style="font-family: MathJax_Math-italic;">R</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-53">R</script>, for interval sum, we need <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-54-Frame"><nobr><span class="math" id="MathJax-Span-330" role="math" style="width: 5.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.106em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.67em 1000.003em 3.337em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-331"><span class="munderover" id="MathJax-Span-332"><span style="display: inline-block; position: relative; width: 2.439em; height: 0px;"><span style="position: absolute; clip: rect(3.016em 1000.003em 4.426em -999.997em); top: -3.971em; left: 0.003em;"><span class="mo" id="MathJax-Span-333" style="font-family: MathJax_Size1; vertical-align: 0.003em;">∑</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; clip: rect(3.272em 1000.003em 4.17em -999.997em); top: -4.42em; left: 1.029em;"><span class="texatom" id="MathJax-Span-334"><span class="mrow" id="MathJax-Span-335"><span class="mi" id="MathJax-Span-336" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; clip: rect(3.272em 1000.003em 4.17em -999.997em); top: -3.715em; left: 1.029em;"><span class="texatom" id="MathJax-Span-337"><span class="mrow" id="MathJax-Span-338"><span class="mi" id="MathJax-Span-339" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-340" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mi" id="MathJax-Span-341" style="font-size: 70.7%; font-family: MathJax_Math-italic;">L</span></span></span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-342" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-343"><span class="mrow" id="MathJax-Span-344"><span class="mtext" id="MathJax-Span-345" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-346" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="msubsup" id="MathJax-Span-347" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-348" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-349" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="mo" id="MathJax-Span-350" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-351" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-352"><span class="mtext" id="MathJax-Span-353" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.848em; vertical-align: -0.229em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-54">\sum_{i=L}^{R}(\textrm{mul}*A_i + \textrm{add}</script>) which we can write as <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-55-Frame"><nobr><span class="math" id="MathJax-Span-354" role="math" style="width: 8.721em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.49em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.67em 1000.003em 3.337em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-355"><span class="mo" id="MathJax-Span-356" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-357" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-358" style="font-family: MathJax_Main; padding-left: 0.196em;">−</span><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">L</span><span class="mo" id="MathJax-Span-360" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="mn" id="MathJax-Span-361" style="font-family: MathJax_Main; padding-left: 0.196em;">1</span><span class="mo" id="MathJax-Span-362" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-363" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="texatom" id="MathJax-Span-364" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-365"><span class="mtext" id="MathJax-Span-366" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-367" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="texatom" id="MathJax-Span-368" style="padding-left: 0.196em;"><span class="mrow" id="MathJax-Span-369"><span class="mtext" id="MathJax-Span-370" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-371" style="font-family: MathJax_Main; padding-left: 0.196em;">∗</span><span class="munderover" id="MathJax-Span-372" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 2.439em; height: 0px;"><span style="position: absolute; clip: rect(3.016em 1000.003em 4.426em -999.997em); top: -3.971em; left: 0.003em;"><span class="mo" id="MathJax-Span-373" style="font-family: MathJax_Size1; vertical-align: 0.003em;">∑</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; clip: rect(3.272em 1000.003em 4.17em -999.997em); top: -4.42em; left: 1.029em;"><span class="texatom" id="MathJax-Span-374"><span class="mrow" id="MathJax-Span-375"><span class="mi" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; clip: rect(3.272em 1000.003em 4.17em -999.997em); top: -3.715em; left: 1.029em;"><span class="texatom" id="MathJax-Span-377"><span class="mrow" id="MathJax-Span-378"><span class="mi" id="MathJax-Span-379" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span class="mo" id="MathJax-Span-380" style="font-size: 70.7%; font-family: MathJax_Main;">=</span><span class="mi" id="MathJax-Span-381" style="font-size: 70.7%; font-family: MathJax_Math-italic;">L</span></span></span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-382" style="padding-left: 0.196em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-383" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-384" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.848em; vertical-align: -0.229em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-55">(R-L+1)*\textrm{add} + \textrm{mul}*\sum_{i=L}^{R}A_i</script>. So, we have to store sum of original <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-56-Frame"><nobr><span class="math" id="MathJax-Span-385" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-386"><span class="msubsup" id="MathJax-Span-387"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-388" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-389" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-56">A_i</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-57-Frame"><nobr><span class="math" id="MathJax-Span-390" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.772em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-391"><span class="mi" id="MathJax-Span-392" style="font-family: MathJax_Math-italic;">R</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-57">R</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-58-Frame"><nobr><span class="math" id="MathJax-Span-393" role="math" style="width: 0.452em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.708em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.606em 1000.003em 2.696em -999.997em); top: -2.497em; left: 0.003em;"><span class="mrow" id="MathJax-Span-394"><span class="mi" id="MathJax-Span-395" style="font-family: MathJax_Math-italic;">L</span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-58">L</script>(basically size) and two variables <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-59-Frame"><nobr><span class="math" id="MathJax-Span-396" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-397"><span class="texatom" id="MathJax-Span-398"><span class="mrow" id="MathJax-Span-399"><span class="mtext" id="MathJax-Span-400" style="font-family: MathJax_Main;">mul</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-59">\textrm{mul}</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-60-Frame"><nobr><span class="math" id="MathJax-Span-401" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-402"><span class="texatom" id="MathJax-Span-403"><span class="mrow" id="MathJax-Span-404"><span class="mtext" id="MathJax-Span-405" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-60">\textrm{add}</script> at each node. Now, to make things easier we can just directly store the <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-61-Frame"><nobr><span class="math" id="MathJax-Span-406" role="math" style="width: 1.157em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.862em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.183em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-407"><span class="texatom" id="MathJax-Span-408"><span class="mrow" id="MathJax-Span-409"><span class="mtext" id="MathJax-Span-410" style="font-family: MathJax_Main;">sum</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-61">\textrm{sum}</script> of a node(i.e.* sum of all elements in that interval) instead of storing sum of original <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-62-Frame"><nobr><span class="math" id="MathJax-Span-411" role="math" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.157em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(0.131em 1000.003em 1.349em -999.997em); top: -1.022em; left: 0.003em;"><span class="mrow" id="MathJax-Span-412"><span class="msubsup" id="MathJax-Span-413"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.08em 1000.003em 4.17em -999.997em); top: -3.971em; left: 0.003em;"><span class="mi" id="MathJax-Span-414" style="font-family: MathJax_Math-italic;">A</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span><span style="position: absolute; top: -3.843em; left: 0.772em;"><span class="mi" id="MathJax-Span-415" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span><span style="display: inline-block; width: 0px; height: 3.978em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 1.029em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.617em; vertical-align: -0.113em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-62">A_i</script>. Then, for each range multiplication update or range addition update, we also update this <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-63-Frame"><nobr><span class="math" id="MathJax-Span-416" role="math" style="width: 1.157em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.862em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(2.183em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-417"><span class="texatom" id="MathJax-Span-418"><span class="mrow" id="MathJax-Span-419"><span class="mtext" id="MathJax-Span-420" style="font-family: MathJax_Main;">sum</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.348em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-63">\textrm{sum}</script> along with the variables <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-64-Frame"><nobr><span class="math" id="MathJax-Span-421" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-422"><span class="texatom" id="MathJax-Span-423"><span class="mrow" id="MathJax-Span-424"><span class="mtext" id="MathJax-Span-425" style="font-family: MathJax_Main;">mul</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-64">\textrm{mul}</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-65-Frame"><nobr><span class="math" id="MathJax-Span-426" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-427"><span class="texatom" id="MathJax-Span-428"><span class="mrow" id="MathJax-Span-429"><span class="mtext" id="MathJax-Span-430" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-65">\textrm{add}</script>.</p>
<p>Also, as we do we in lazy propagation, we propagate the laziness to the children of a node, if we need to query a children of a lazy node. In this problem, we can individually propagate variables <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-66-Frame"><nobr><span class="math" id="MathJax-Span-431" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.734em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-432"><span class="texatom" id="MathJax-Span-433"><span class="mrow" id="MathJax-Span-434"><span class="mtext" id="MathJax-Span-435" style="font-family: MathJax_Main;">mul</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-66">\textrm{mul}</script> and <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-67-Frame"><nobr><span class="math" id="MathJax-Span-436" role="math" style="width: 1.029em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.67em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.016em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-437"><span class="texatom" id="MathJax-Span-438"><span class="mrow" id="MathJax-Span-439"><span class="mtext" id="MathJax-Span-440" style="font-family: MathJax_Main;">add</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.502em; vertical-align: -0.037em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-67">\textrm{add}</script>. So, if at a node <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-68-Frame"><nobr><span class="math" id="MathJax-Span-441" role="math" style="width: 2.054em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.401em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.208em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-442"><span class="texatom" id="MathJax-Span-443"><span class="mrow" id="MathJax-Span-444"><span class="mtext" id="MathJax-Span-445" style="font-family: MathJax_Main;">mul</span></span></span><span class="mo" id="MathJax-Span-446" style="font-family: MathJax_Main; padding-left: 0.26em;">≠</span><span class="mn" id="MathJax-Span-447" style="font-family: MathJax_Main; padding-left: 0.26em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.656em; vertical-align: -0.152em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-68">\textrm{mul} \ne 1</script>, then we can say that this node is multiplication lazy and if required, we'll propagate this variable down to the children of this node. Similarly, if at a node <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-69-Frame"><nobr><span class="math" id="MathJax-Span-448" role="math" style="width: 1.99em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.337em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.926em 1000.003em 3.208em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-449"><span class="texatom" id="MathJax-Span-450"><span class="mrow" id="MathJax-Span-451"><span class="mtext" id="MathJax-Span-452" style="font-family: MathJax_Main;">add</span></span></span><span class="mo" id="MathJax-Span-453" style="font-family: MathJax_Main; padding-left: 0.26em;">≠</span><span class="mn" id="MathJax-Span-454" style="font-family: MathJax_Main; padding-left: 0.26em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.656em; vertical-align: -0.152em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-69">\textrm{add} \ne 0</script>, we can say that this node is addition lazy and propagate this laziness down to its children.</p>
<h1>COMPLEXITY:</h1>
<p>For building the segment tree we need <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-70-Frame"><nobr><span class="math" id="MathJax-Span-455" role="math" style="width: 2.76em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.619em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-456"><span class="mi" id="MathJax-Span-457" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-458" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="texatom" id="MathJax-Span-460"><span class="mrow" id="MathJax-Span-461"><span class="mtext" id="MathJax-Span-462" style="font-family: MathJax_Main;">log</span></span></span><span class="mi" id="MathJax-Span-463" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-464" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-70">O(N \textrm{log} N)</script> and each query is <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-71-Frame"><nobr><span class="math" id="MathJax-Span-465" role="math" style="width: 2.247em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.721em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-466"><span class="mi" id="MathJax-Span-467" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-468" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-469"><span class="mrow" id="MathJax-Span-470"><span class="mtext" id="MathJax-Span-471" style="font-family: MathJax_Main;">log</span></span></span><span class="mi" id="MathJax-Span-472" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-473" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-71">O(\textrm{log} N)</script>, so total complexity is <span class="MathJax_Preview" style="color: inherit;"></span><span class="MathJax" id="MathJax-Element-72-Frame"><nobr><span class="math" id="MathJax-Span-474" role="math" style="width: 5.196em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.593em; height: 0px; font-size: 60%;"><span style="position: absolute; clip: rect(1.862em 1000.003em 3.272em -999.997em); top: -2.817em; left: 0.003em;"><span class="mrow" id="MathJax-Span-475"><span class="mi" id="MathJax-Span-476" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-477" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-478" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="texatom" id="MathJax-Span-479"><span class="mrow" id="MathJax-Span-480"><span class="mtext" id="MathJax-Span-481" style="font-family: MathJax_Main;">log</span></span></span><span class="mi" id="MathJax-Span-482" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-483" style="font-family: MathJax_Main; padding-left: 0.196em;">+</span><span class="mi" id="MathJax-Span-484" style="font-family: MathJax_Math-italic; padding-left: 0.196em;">Q</span><span class="texatom" id="MathJax-Span-485"><span class="mrow" id="MathJax-Span-486"><span class="mtext" id="MathJax-Span-487" style="font-family: MathJax_Main;">log</span></span></span><span class="mi" id="MathJax-Span-488" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.067em;"></span></span><span class="mo" id="MathJax-Span-489" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.824em;"></span></span></span><span style="border-left-width: 0.002em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.694em; vertical-align: -0.19em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-72">O(N \textrm{log} N + Q \textrm{log} N)</script>.</p>
<h1>PROBLEMS TO SOLVE:</h1>
<p><a href="http://www.codechef.com/problems/QSET">QSET</a> <br>
<a href="http://www.spoj.com/problems/HORRIBLE">SPOJ HORRIBLE</a>  <br>
<a href="http://www.codechef.com/problems/FNCS">FNCS</a> <br>
<a href="http://www.codechef.com/problems/MSTICK">MSTICK</a> <br>
<a href="http://www.codechef.com/problems/ANUSAR">ANUSAR</a> <br>
<a href="http://www.codechef.com/problems/FRBSUM">FRBSUM</a> <br>
<a href="https://www.hackerrank.com/contests/101hack26/challenges/sherlock-and-unique-substrings">Sherlock and Unique Substrings</a>  </p>
<h1>AUTHOR'S, TESTER'S SOLUTIONS:</h1>
<p><a href="http://www.codechef.com/download/Solutions/JULY15/Setter/ADDMUL.cpp">setter</a> <br>
<a href="http://www.codechef.com/download/Solutions/JULY15/Tester/ADDMUL.cpp">tester</a>    </p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="/tags/segment-tree/" class="post-tag tag-link-segment-tree" title="see questions tagged 'segment-tree'" rel="tag">segment-tree</a>
                                
                                    <a href="/tags/july15/" class="post-tag tag-link-july15" title="see questions tagged 'july15'" rel="tag">july15</a>
                                
                                    <a href="/tags/medium/" class="post-tag tag-link-medium" title="see questions tagged 'medium'" rel="tag">medium</a>
                                
                                    <a href="/tags/editorial/" class="post-tag tag-link-editorial" title="see questions tagged 'editorial'" rel="tag">editorial</a>
                                
                                    <a href="/tags/lazypropagation/" class="post-tag tag-link-lazypropagation" title="see questions tagged 'lazypropagation'" rel="tag">lazypropagation</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                
<div class="community-wiki">
        This question is marked "community wiki".
        
    </div>
                            </div>
                            <div class="post-update-info-container">
                                    
<div class="post-update-info post-update-info-user">
    <p style="line-height:12px;">
        asked
        <strong>26 Jun, 07:54</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="http://www.codechef.com/sites/default/files/uploads/pictures/default.jpg?s=32&amp;d=identicon&amp;r=g" alt="darkshadows's gravatar image">
    <p><a href="/users/16074/darkshadows">darkshadows ♦♦</a><br>
    <span class="score" title="2889 karma"><span class="">2.9k</span></span><span title="88 badges"><span class="badge1">●</span><span class="badgecount">88</span></span><span title="133 badges"><span class="silver">●</span><span class="badgecount">133</span></span><span title="154 badges"><span class="bronze">●</span><span class="badgecount">154</span></span><br>
    
    <span title="Rate of the user's accepted answers" class="accept_rate">accept rate:</span>
    <span title="darkshadows has one accepted answer">6%</span>
    </p>
</div>

    <div class="post-update-info post-update-info-edited">
        <p style="line-height:12px;">
            <a href="/revisions/72277/">
                edited
                <strong>2 days ago</strong>
            </a>
        </p>
        
    </div>


                            </div>
                            


<div class="comments-container" id="comments-container-72277">
    
</div>
<div id="comment-tools-72277" class="comment-tools">
    
    
</div>
<div id="comment-72277-form-container" class="comment-form-container">
    
</div>
    

                        </div>

                    </td>